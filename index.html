<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crisp Integration Demo</title>
  <!-- Crisp chat script -->
  <script type="text/javascript">
    window.$crisp = [];
    window.CRISP_WEBSITE_ID = "b0e5e19a-fc53-47b0-bbb9-cf1fa8608652";
    (function() {
      var d = document;
      var s = d.createElement("script");
      s.src = "https://client.crisp.chat/l.js";
      s.async = 1;
      d.getElementsByTagName("head")[0].appendChild(s);
    })();
  </script>
  <style>
    /* Blinking text styles */
    .blinking-text {
      position: fixed; /* Or absolute if relative to a container */
      top: 10px; /* Adjust as needed for spacing */
      right: 10px; /* Adjust as needed for spacing */
      font-size: medium; /* Medium font size */
      color: black; /* Default color; change if needed */
      animation: blink 1s infinite; /* Blinking animation: 1s duration, infinite loop */
    }

    @keyframes blink {
      0% { opacity: 1; }
      50% { opacity: 0; }
      100% { opacity: 1; }
    }
  </style>
</head>
<body>
  <!-- Blinking text element -->
  <div class="blinking-text">Crisp Testing by Fauzan Battiwala</div>

  <h1>Crisp Demo Site</h1>
  <p>This is a simple local HTML file integrated with Crisp. Use the buttons below to test sending prompts (messages) to trigger chat communication. Note: Internet is required for the Crisp widget to load.</p>
  
  <!-- Button to open chat and pre-fill a message -->
  <button onclick="openAndPrefillChat()">Open Chat & Pre-fill "Hello World"</button>
  
  <!-- Button to send an automated message -->
  <button onclick="sendAutomatedMessage()">Send Automated "Test Prompt"</button>
  
  <script>
    // Wait for Crisp to load (optional, but ensures reliability)
    document.addEventListener('DOMContentLoaded', function() {
      if (window.$crisp) {
        $crisp.push(['safe', true]); // Enable safe mode to avoid errors
      }
    });

    // Function to open chat and pre-fill a message
    function openAndPrefillChat() {
      if (window.$crisp) {
        $crisp.push(['set', 'message:text', ['Hello World from local HTML!']]); // Pre-fill text
        $crisp.push(['do', 'chat:open']); // Open the chat widget
      } else {
        alert('Crisp not loaded yet. Refresh and try again.');
      }
    }

    // Function to send an automated message (triggers as visitor)
    function sendAutomatedMessage() {
      if (window.$crisp) {
        $crisp.push(['do', 'message:send', ['text', 'Test prompt sent from local HTML!']]); // Send text message
        $crisp.push(['do', 'chat:open']); // Open chat to show the sent message
      } else {
        alert('Crisp not loaded yet. Refresh and try again.');
      }
    }
  </script>
</body>
</html>
